<!DOCTYPE html>
<html lang="pt-br">
<head>
    {% load static %} {# Carrega os arquivos estáticos do Django #}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Equipe - Temeisheng</title> {# Conteúdo do bloco 'title' da página de equipe #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% comment %} Aqui estaria o conteúdo do bloco 'head_extra' se você tivesse um no equipe.html {% endcomment %}
    
</head>
<body style="background-color: #2c3e50; color: #ecf0f1;"> {# Exemplo de cor de fundo escura e texto claro #}

    <header class="bg-dark text-white p-3 mb-4">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="h3 mb-0">TEMEISHENG</h1>
            <nav>
                <ul class="nav">
                    <li class="nav-item"><a class="nav-link text-white" href="{% url 'menu' %}">Menu</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="{% url 'login' %}">Login</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="{% url 'cadastro' %}">Cadastro</a></li>
                    {# Adicione outros links globais aqui se necessário #}
                </ul>
            </nav>
        </div>
    </header>

    <main class="container my-4">
        {# Conteúdo do bloco 'content' da página de equipe #}
        <div class="card p-4 shadow-sm" style="background-color: #34495e; border-radius: 10px;">
            <h1 class="text-center mb-4" style="color: #ecf0f1;">Minha Equipe</h1>
            <p class="text-center mb-4" style="color: #bdc3c7;">Aqui você encontra as informações sobre os membros da sua equipe e os subsídios de convite.</p>

            <div class="mb-4">
                <h3 style="color: #3498db;">Seu Link de Convite:</h3>
                <div class="input-group">
                    <input type="text" id="referralLink" class="form-control" value="{% url 'cadastro' %}?ref={{ request.user.profile.referral_code }}" readonly style="background-color: #2c3e50; border-color: #3498db; color: #ecf0f1;">
                    <button type="button" class="btn btn-primary" style="background-color: #3498db; border-color: #3498db;" onclick="copyToClipboard('referralLink')">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
                <small class="form-text" style="color: #bdc3c7;">Compartilhe este link para convidar novos membros.</small>
            </div>

            <div class="mb-4">
                <h3 style="color: #3498db;">Subsídios de Convites:</h3>
                <p style="color: #ecf0f1;">
                    Sempre que convidar alguém para se inscrever com o seu link, se a pessoa que convidares tiver um nível ativo, você receberá um subsídio de <strong style="color: #1abc9c;">500 KZ</strong>. Este valor é gerado automaticamente na sua conta no indicador "Subsídio".
                </p>
                <div class="alert alert-info" role="alert" style="background-color: #2c3e50; border-color: #3498db; color: #ecf0f1;">
                    Seu Subsídio Atual: <strong style="color: #1abc9c;">{{ request.user.profile.subsidy_balance|default:"0.00" }} KZ</strong> {# Exemplo de como exibir o saldo de subsídio #}
                </div>
            </div>

            <div class="mb-4">
                <h3 style="color: #3498db;">Membros da Sua Equipe:</h3>
                {% if equipe %}
                    <ul class="list-group">
                        {# Itere sobre os membros da equipe (passados do seu views.py) #}
                        {% for membro in equipe %}
                            <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: #2c3e50; border-color: #3498db; color: #ecf0f1;">
                                {{ membro.username }} (Telefone: {{ membro.phone_number }})
                                {% if membro.is_active_level %}
                                    <span class="badge bg-success rounded-pill">Nível Ativo</span>
                                {% else %}
                                    <span class="badge bg-warning text-dark rounded-pill">Nível Inativo</span>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="color: #bdc3c7;">Você ainda não tem membros na sua equipe. Compartilhe seu link de convite!</p>
                {% endif %}
            </div>

            <div class="d-grid gap-2 mt-4">
                <a href="{% url 'menu' %}" class="btn btn-secondary btn-lg" style="background-color: #7f8c8d; border-color: #7f8c8d;">Voltar ao Menu</a>
            </div>
        </div>

        <script>
            function copyToClipboard(elementId) {
                const element = document.getElementById(elementId);
                const textToCopy = element.value; // Para input, use .value
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert('Link de convite copiado para a área de transferência!');
                }).catch(err => {
                    console.error('Falha ao copiar: ', err);
                });
            }
        </script>
    </main>

    <footer class="bg-dark text-white p-3 mt-4 text-center">
        <p>&copy; 2024 Temeisheng. Todos os direitos reservados.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="{% static 'js/script.js' %}"></script>
    {% comment %} Aqui estaria o conteúdo do bloco 'scripts_extra' se você tivesse um no equipe.html {% endcomment %}
    
</body>
</html>
